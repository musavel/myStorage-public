# 2025-10-15 변경사항

## 🐛 버그 수정

### 필드 매핑 조회 응답 구조 불일치 수정
- **문제**: 필드 매핑 조회 시 중첩된 구조로 응답되어 프론트엔드에서 매핑이 깨짐
  - DB 저장: `{"mapping": {...}, "ignore_unmapped": true}`
  - API 응답: `{"mapping": {"mapping": {...}, "ignore_unmapped": true}}`
  - 프론트엔드에서 `mapping`, `ignore_unmapped` 키 자체를 필드로 잘못 처리
- **해결**: `get_field_mapping`에서 불필요한 "mapping" 래핑 제거
  - `return {"mapping": collection.field_mapping}` → `return collection.field_mapping`
- **파일**: `backend/app/services/scraper/mapping_service.py` (66줄)

### 307 Temporary Redirect 문제 해결
- **문제**: FastAPI가 trailing slash가 없는 URL을 자동으로 리다이렉트
  - `/api/collections` → `/api/collections/` (307)
  - 불필요한 리다이렉트로 성능 저하 및 로그 노이즈
- **해결**: 모든 API 호출에 trailing slash 추가
  - `getCollections()`: `/api/collections/`
  - `getItems()`: `/api/items/`
  - 모든 CRUD 엔드포인트에 적용
- **파일**: `frontend/lib/api.ts` (51, 57, 71, 77, 84, 98, 112줄)

### 외부 네트워크 접속 문제 해결
- **문제**: 같은 네트워크의 다른 컴퓨터에서 `<IP>:3000` 접속 시 컬렉션 페이지가 로드되지 않음
  - API URL이 `localhost:8000`으로 하드코딩되어 브라우저가 자신의 localhost를 찾음
- **해결**: 브라우저의 현재 호스트 기준으로 동적 API URL 생성
  - `localhost` 접속 → `http://localhost:8000`
  - `192.168.x.x` 접속 → `http://192.168.x.x:8000`
  - Docker 포트포워딩 활용하여 하드코딩 제거
- **파일**: `frontend/lib/api.ts` (3-7줄)

## 📝 문서 업데이트

### Next.js 버전 정보 수정
- **변경**: 모든 문서에서 Next.js 14 → Next.js 15로 업데이트
- **파일**:
  - `README.md` (30줄)
  - `docs/DEVELOPMENT.md` (64줄)
  - `docs/ARCHITECTURE.md` (26줄)
  - `codex_context.md` (3줄)

## 🔐 보안 검토

### Git 히스토리 민감정보 전수 조사
- **검토 항목**:
  - `.env` 파일 커밋 히스토리 ✅ (없음)
  - `.pem` 키 파일 ✅ (없음)
  - API 키/시크릿 하드코딩 ✅ (없음)
  - 문서 내 실제 시크릿 값 ✅ (placeholder만 존재)
  - docker-compose.yml 하드코딩 ✅ (환경변수만 사용)
- **결과**: Git 히스토리 깨끗함, Public 저장소 전환 가능
- **참고**: Git Author 이메일은 공개 정보이므로 문제없음

## 🗄️ 데이터베이스

### MongoDB 중복 데이터 확인
- **검사**: `items_books` 컬렉션의 중복 title 조회
- **결과**: 2개 발견 (개정판으로 허용)
  - "쉽고 빠르게 익히는 실전 LLM" (2개)
  - "전문가를 위한 파이썬" (2개)
