# 2025-10-08 (수)


## 📅 2025-10-08 (수) - UI/UX 개선 & Title 필드 시스템 재설계

#### 1. Public 페이지 텍스트 정리 ✅
- **문제**: 설명 텍스트에 줄바꿈(`\n`)과 연속 공백이 그대로 표시됨
- **해결**:
  - `frontend/app/page.tsx`: 컬렉션 설명에서 공백/줄바꿈 정리
  - `frontend/app/collections/[slug]/page.tsx`:
    - 상세 모달의 모든 필드 값에 공백/줄바꿈 정리 적용
    - `whitespace-pre-wrap` 제거
  - 정규식: `.replace(/\s+/g, ' ').trim()` - 연속 공백을 단일 공백으로 변환

#### 2. ItemDetailModal ESC 키 지원 ✅
- **기능**: 상세보기 모달을 ESC 키로 닫을 수 있도록 개선
- **구현**: `useEffect` + `keydown` 이벤트 리스너
- **파일**: `frontend/app/collections/[slug]/page.tsx`

#### 3. Title 필드 필수화 및 UI 분리 ✅
- **문제점**:
  - 사용자가 "필드 추가" 버튼을 눌러야 title 필드가 보임
  - title 필드가 일반 필드와 섞여서 삭제/수정 가능해 보임
  - AI 추천 후 title 필드가 사라지는 버그

- **해결책: Title 필드 영역 분리**
  - **필수 필드 섹션** (상단)
    - Title 필드만 파란색 테두리로 고정 표시
    - "🔒 고정" 배지
    - Label과 Placeholder만 수정 가능
    - Key, Type, Required는 수정 불가
  - **추가 필드 섹션** (하단)
    - Title을 제외한 나머지 필드만 테이블에 표시
    - AI 추천, 필드 추가 버튼 항상 노출
    - 빈 상태에서도 버튼 사용 가능

- **FieldDefinitionEditor 리팩토링** (`frontend/components/FieldDefinitionEditor.tsx`):
  - `titleField`와 `otherFields`로 분리
  - `addField()`: title 필드 유지하며 새 필드 추가
  - `updateTitleField()`: title 필드 전용 업데이트 함수
  - 모든 CRUD 함수에서 title 필드 보존 로직 구현
  - 체크박스 선택, 삭제 등에서 title 필드 자동 제외

- **CollectionModal 수정** (`frontend/components/CollectionModal.tsx`):
  - 새 컬렉션 생성 시 title 필드 기본 추가
  - `handleAISuggestionApply()`: AI 추천 결과에 title 필드 유지
  - 매핑 형식 자동 변환 (프론트엔드 ↔ 백엔드)

- **AIFieldSuggestion 개선** (`frontend/components/AIFieldSuggestion.tsx`):
  - 컬렉션 이름이 없으면 에러 메시지 표시
  - 빈 상태 UI 개선

#### 4. 타입 에러 수정 ✅
- **문제**: `Item` 인터페이스에 `title` 속성이 없는데 참조하려고 함
- **해결**: `frontend/app/collections/[slug]/page.tsx`
  - 25번 줄: `item.title || 'Untitled'` → `'Untitled'`
  - 376번 줄: 동일하게 수정
  - metadata에서 title 필드를 찾는 로직만 사용

#### 5. 사용자 경험 개선
- **명확한 UI 구조**: 필수 필드 vs 추가 필드 시각적 분리
- **직관적인 워크플로우**:
  - 컬렉션 생성 시 title 필드 자동 생성
  - AI 추천 시 title 필드 자동 보존
  - 필드 추가 버튼 항상 접근 가능
- **일관성**: 모든 경로에서 title 필드 보존 (추가/수정/삭제/AI추천)

